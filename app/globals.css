@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  --btc: #f2a900;
  --form-control-color: #f2a900;
}

::selection {
  background: var(--btc);
  color: rgb(39 39 42);
}

html {
  scroll-behavior: smooth;
  scroll-padding-top: 50px; /* Account for sticky header (breadcrumbs + padding + border) */
}

body {
  font-family: var(--font-ubuntu), sans-serif;
}

@layer base {
  a:hover {
    @apply underline;
  }
}

@layer components {

  /* Main page background - used across page layouts */
  .page-bg {
    @apply bg-gray-50 dark:bg-gray-900 text-gray-800 dark:text-gray-300;
  }

  /* Button Styles */
  .btn-primary {
    @apply inline-flex items-center gap-2 justify-center px-6 py-3 bg-btc text-gray-900 font-semibold rounded-md hover:bg-btc/90 transition-colors hover:no-underline;
  }

  .btn-primary-sm {
    @apply inline-flex items-center justify-center gap-2 px-4 py-2 bg-btc hover:bg-btc/90 text-gray-900 font-semibold rounded-md transition-colors;
  }

  .btn-secondary {
    @apply inline-flex items-center gap-2 justify-center px-6 py-3 bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-gray-200 font-semibold rounded-md hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors hover:no-underline;
  }

  .btn-secondary-sm {
    @apply inline-flex items-center gap-2 justify-center px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-gray-200 font-medium rounded-md hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors hover:no-underline;
  }

  /* Text Utilities */
  .text-secondary {
    @apply text-gray-600 dark:text-gray-400;
  }

  /* Container */
  .container-content {
    @apply container mx-auto px-4 md:px-8;
  }

  /* Code Block Header */
  .code-block-header {
    @apply bg-gray-200 dark:bg-gray-800 px-4 py-2 rounded-t-lg;
  }

  /* Heading Styles */
  .heading-page {
    @apply text-3xl md:text-4xl font-bold mb-4 text-gray-900 dark:text-gray-200;
  }

  .heading-page-hero {
    @apply text-4xl md:text-5xl font-bold mb-4 text-gray-900 dark:text-gray-200;
  }

  .heading-section {
    @apply text-lg font-semibold text-gray-800 dark:text-gray-300;
  }

  .heading-subsection {
    @apply text-base sm:text-lg font-semibold text-gray-700 dark:text-gray-300;
  }

  .heading-section-accent {
    @apply text-2xl md:text-3xl font-bold mb-4 text-btc;
  }

  .heading-section-sm {
    @apply text-sm font-semibold text-gray-800 dark:text-gray-300;
  }

  .heading-section-muted {
    @apply text-lg font-semibold text-gray-500 dark:text-gray-300;
  }

  /* Treemap: brief redraw pulse when transaction data updates */
  @keyframes treemap-update {
    0% {
      opacity: 1;
    }
    30% {
      opacity: 0.75;
    }
    100% {
      opacity: 1;
    }
  }
  .animate-treemap-update {
    animation: treemap-update 0.4s ease-out;
  }

  /* Treemap rects: smooth fill/opacity when metric or data changes */
  .treemap-rect-transition rect {
    transition: fill 0.35s ease-out, opacity 0.25s ease-out;
  }

  /* Modal overlay - use with flex/align/padding as needed per modal */
  .modal-overlay {
    @apply fixed inset-0 z-[60] bg-black/60;
  }

  /* Modal card - use for dialog content (add mx-4 for small viewport spacing when needed) */
  .modal-card {
    @apply rounded-lg p-6 max-w-md w-full bg-gray-100 dark:bg-gray-900 border border-gray-300 dark:border-gray-700;
  }

  /* Inline code badge - for displaying code/keyboard shortcuts inline */
  .code-inline {
    @apply font-mono bg-gray-200 dark:bg-gray-800 px-1.5 py-0.5 rounded text-sm text-gray-900 dark:text-gray-300;
  }

  /* Form input base - gray panel, focus border */
  .input-panel {
    @apply bg-gray-200 dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded text-gray-800 dark:text-gray-200 focus:outline-none focus:border-btc;
  }

  /* Form input base - white/gray-800, focus ring */
  .input-panel-ring {
    @apply bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-md text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-btc focus:border-transparent;
  }

  /* Icon button - header/nav actions */
  .btn-icon {
    @apply p-2 rounded-md text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 hover:bg-gray-200/50 dark:hover:bg-gray-700/50 transition-colors;
  }

  /* Gray panel - no focus (add px/py/size as needed) */
  .panel-base {
    @apply bg-gray-200 dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded text-gray-800 dark:text-gray-200;
  }

  /* Gray panel with hover accent */
  .panel-base-hover {
    @apply bg-gray-200 dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded text-gray-800 dark:text-gray-200 hover:border-btc hover:bg-gray-300 dark:hover:bg-gray-700 transition-colors;
  }

  /* Footer top bar - border, flex layout */
  .footer-bar {
    @apply w-full border-t border-gray-200 dark:border-gray-700 pt-4 flex flex-col md:flex-row items-center justify-center gap-y-1 md:gap-x-4 md:gap-y-0 text-sm text-secondary;
  }
}

@layer utilities {}

/*
 * Notification Toast
 */
@keyframes toast-in {
  from {
    opacity: 0;
    transform: translate(-50%, 0.5rem);
  }
  to {
    opacity: 1;
    transform: translate(-50%, 0);
  }
}

@keyframes toast-out {
  from {
    opacity: 1;
    transform: translate(-50%, 0);
  }
  to {
    opacity: 0;
    transform: translate(-50%, 0.5rem);
  }
}

.animate-toast-in {
  animation: toast-in 0.2s ease-out forwards;
}

.animate-toast-out {
  animation: toast-out 0.2s ease-out forwards;
}

/*  
* Radio Buttons 
*/
input[type="radio"] {
  appearance: none;
  background-color: #fff;
  margin: 0;
  font: inherit;
  color: currentColor;
  width: 1.15em;
  height: 1.15em;
  border: 0.15em solid currentColor;
  border-radius: 50%;
  transform: translateY(-0.075em);
  display: grid;
  place-content: center;
}

input[type="radio"]::before {
  content: "";
  width: 0.65em;
  height: 0.65em;
  border-radius: 50%;
  transform: scale(0);
  transition: 120ms transform ease-in-out;
  box-shadow: inset 1em 1em var(--form-control-color);
  background-color: CanvasText;
}

input[type="radio"]:checked::before {
  transform: scale(1);
}

input[type="radio"]:focus {
  outline: max(2px, 0.15em) solid currentColor;
  outline-offset: max(2px, 0.15em);
}

/*  
* Page-level heading styles (outside markdown)
*/
h1, h2, h3, h4, h5, h6 {
  @apply text-gray-900 dark:text-gray-200;
}

/* Engraved text: nearly same color as background, carved-in depth (shadow top-left, highlight bottom-right) */
.engraved {
  color: rgb(243 244 246); /* gray-100 – lighter, close to gray-50 background */
  text-shadow:
    /* Top-left: shadow cast into the groove */
    -3px -3px 2px rgba(0 0 0 / 0.15),
    -2px -2px 1px rgba(0 0 0 / 0.12),
    -1px -1px 0 rgba(0 0 0 / 0.08),
    /* Bottom-right: light catching the lower edge */
    3px 3px 2px rgba(255 255 255 / 0.85),
    2px 2px 1px rgba(255 255 255 / 0.5),
    1px 1px 0 rgba(255 255 255 / 0.25);
}

.dark .engraved {
  color: rgb(31 41 55); /* gray-800 – close to gray-900 background */
  text-shadow:
    /* Top-left: shadow in the groove */
    -3px -3px 2px rgba(0 0 0 / 0.5),
    -2px -2px 1px rgba(0 0 0 / 0.35),
    -1px -1px 0 rgba(0 0 0 / 0.2),
    /* Bottom-right: subtle highlight */
    3px 3px 2px rgba(255 255 255 / 0.1),
    2px 2px 1px rgba(255 255 255 / 0.06),
    1px 1px 0 rgba(255 255 255 / 0.03);
}

/* Remove top margin from first h1 in content area (not header) */
.container h1:first-of-type,
.max-w-4xl h1:first-of-type,
.max-w-7xl h1:first-of-type {
  @apply mt-0;
}

/* Handle page-level h1 elements (direct children of content divs, not in header) */
main > div > div > div > h1:first-child,
main > div > div > h1:first-child {
  @apply mt-0;
}

/*  
* Markdown Content Styles
*/
.markdown-content {
  @apply text-gray-800 dark:text-gray-300;
}

.markdown-content h1 {
  @apply text-3xl sm:text-4xl font-bold mt-8 mb-4 text-gray-900 dark:text-gray-200;
}

.markdown-content h1:first-child {
  @apply mt-0;
}

.markdown-content h2 {
  @apply text-2xl sm:text-3xl font-bold mt-8 mb-4 text-gray-900 dark:text-gray-200;
  scroll-margin-top: 40px;
}

.markdown-content h3 {
  @apply text-lg sm:text-xl font-semibold mt-6 mb-3 text-gray-900 dark:text-gray-200;
  scroll-margin-top: 40px;
}

.markdown-content h4 {
  @apply text-base sm:text-lg font-semibold mt-4 mb-2 text-gray-900 dark:text-gray-200;
}

.markdown-content h5 {
  @apply text-sm sm:text-base font-semibold mt-4 mb-2 text-gray-900 dark:text-gray-200;
}

.markdown-content h6 {
  @apply text-xs sm:text-sm font-semibold mt-4 mb-2 text-gray-900 dark:text-gray-200;
}

.markdown-content p {
  @apply mb-4 leading-7;
}

/* Glossary links - dotted underline by default, BTC color with solid underline on hover */
.markdown-content a[href^="/docs/glossary"],
.markdown-content .glossary-link {
  @apply text-gray-900 dark:text-gray-200 hover:text-btc transition-colors;
  text-decoration: underline;
  text-decoration-style: dotted;
  text-underline-offset: 2px;
}

.markdown-content a[href^="/docs/glossary"]:hover,
.markdown-content .glossary-link:hover {
  text-underline-offset: 3px;
}

.markdown-content ul,
.markdown-content ol {
  @apply mb-4 ml-6;
}

.markdown-content ul {
  @apply list-disc;
}

.markdown-content ol {
  @apply list-decimal;
}

.markdown-content li {
  @apply mb-0.5;
}

.markdown-content blockquote {
  @apply border-l-4 border-btc pl-4 my-4 text-gray-600 dark:text-gray-300;
}

.markdown-content code {
  @apply bg-gray-200 dark:bg-gray-800 px-1.5 py-0.5 rounded text-sm font-mono text-gray-900 dark:text-gray-300;
}

.markdown-content .inline-code {
  @apply bg-gray-200 dark:bg-gray-800 px-1.5 py-0.5 rounded text-sm font-mono text-btc;
}

.markdown-content pre {
  @apply bg-gray-100 dark:bg-gray-900 rounded-lg p-2 sm:p-4 overflow-x-auto mb-4 border border-gray-300 dark:border-gray-700 text-xs sm:text-sm text-gray-900 dark:text-gray-300;
}

.markdown-content pre code {
  @apply bg-transparent p-0 text-sm;
  color: inherit;
}

/* Remove unwanted line backgrounds in code blocks that look like selections in dark mode */
/* Target all elements except those with intentional background colors (addition/deletion) */
.markdown-content pre code *:not(.hljs-addition):not(.hljs-deletion),
.markdown-content .hljs *:not(.hljs-addition):not(.hljs-deletion) {
  background-color: transparent !important;
}

/* Code block wrapper styles */
.markdown-content .code-block-wrapper {
  @apply mb-4;
}

.markdown-content .code-block-wrapper pre {
  @apply mb-0 rounded-t-none;
}

.markdown-content .multi-language-code-block {
  @apply mb-4;
}

.markdown-content .multi-language-code-block pre {
  @apply mb-0 rounded-t-none;
}

/* Mermaid: prevent text cutoff; default theme keeps original background */
.markdown-content .mermaid-diagram {
  overflow: visible;
}
.markdown-content .mermaid-diagram svg {
  overflow: visible;
  max-width: 100%;
  height: auto;
  font-size: 16px !important;
}
/* foreignObject: full height + flexbox so label text is vertically centered */
.markdown-content .mermaid-diagram foreignObject {
  overflow: visible;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  box-sizing: border-box;
  padding: 0 !important;
}
.markdown-content .mermaid-diagram foreignObject body {
  overflow: visible;
  margin: 0 !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  min-height: 100% !important;
  height: 100% !important;
  width: 100%;
  box-sizing: border-box;
}
.markdown-content .mermaid-diagram foreignObject > div,
.markdown-content .mermaid-diagram foreignObject body > div {
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  min-height: 100% !important;
  height: 100% !important;
  width: 100%;
  box-sizing: border-box;
}
.markdown-content .mermaid-diagram foreignObject div:has(> .nodeLabel) {
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  min-height: 100% !important;
  height: 100% !important;
}
/* Vertically center label via flex on foreignObject and .nodeLabel; no negative margin. */
.markdown-content .mermaid-diagram .nodeLabel {
  line-height: 1.15;
  padding: 0 !important;
  margin: 0 !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  vertical-align: middle;
  box-sizing: border-box;
}

.markdown-content table {
  @apply border-collapse;
  width: 100%;
  min-width: max-content;
}

.markdown-content table th {
  @apply bg-gray-200 dark:bg-gray-800 border border-gray-300 dark:border-gray-700 px-2 sm:px-4 py-2 text-left font-semibold text-xs sm:text-sm text-gray-900 dark:text-gray-300;
}

.markdown-content table td {
  @apply border border-gray-300 dark:border-gray-700 px-2 sm:px-4 py-2 text-xs sm:text-sm text-gray-900 dark:text-gray-300;
}

.markdown-content table th:first-child,
.markdown-content table td:first-child {
  min-width: 14rem;
}

.markdown-content table th:last-child,
.markdown-content table td:last-child {
  min-width: 14rem;
  max-width: 22rem;
  overflow-wrap: break-word;
  word-break: break-word;
}

.markdown-content table tr:nth-child(even) {
  @apply bg-gray-100 dark:bg-gray-800 bg-opacity-50 dark:bg-opacity-50;
}

.markdown-content a {
  @apply text-btc hover:underline;
}

.markdown-content hr {
  @apply border-gray-300 dark:border-gray-700 my-8;
}

/* Subtle divider for subsections (using custom class via div) */
.markdown-content .divider-subtle {
  @apply border-t border-gray-300 dark:border-gray-600 my-6 opacity-30;
}

.markdown-content img {
  @apply rounded-md my-4 max-w-full;
}

/* Profile images for People page - consistent sizing */
.markdown-content img[src*="/images/people/"] {
  @apply object-cover rounded-md;
}

.markdown-content iframe {
  @apply rounded-md;
}

/* Syntax highlighting theme */
.markdown-content .hljs {
  @apply bg-gray-100 dark:bg-gray-900 text-gray-900 dark:text-gray-300;
}

.markdown-content .hljs-comment,
.markdown-content .hljs-quote {
  @apply text-gray-500 dark:text-gray-500;
}

.markdown-content .hljs-keyword,
.markdown-content .hljs-selector-tag,
.markdown-content .hljs-subst {
  @apply text-purple-600 dark:text-purple-400;
}

.markdown-content .hljs-number,
.markdown-content .hljs-literal,
.markdown-content .hljs-variable,
.markdown-content .hljs-template-variable,
.markdown-content .hljs-tag .hljs-attr {
  @apply text-emerald-600 dark:text-emerald-400;
}

.markdown-content .hljs-string,
.markdown-content .hljs-doctag {
  @apply text-yellow-600 dark:text-yellow-400;
}

.markdown-content .hljs-title,
.markdown-content .hljs-section,
.markdown-content .hljs-selector-id {
  @apply text-blue-600 dark:text-blue-400;
}

.markdown-content .hljs-type,
.markdown-content .hljs-class .hljs-title {
  @apply text-cyan-600 dark:text-cyan-400;
}

.markdown-content .hljs-tag,
.markdown-content .hljs-name,
.markdown-content .hljs-attribute {
  @apply text-pink-600 dark:text-pink-400;
}

.markdown-content .hljs-regexp,
.markdown-content .hljs-link {
  @apply text-orange-600 dark:text-orange-400;
}

.markdown-content .hljs-symbol,
.markdown-content .hljs-bullet {
  @apply text-red-600 dark:text-red-400;
}

.markdown-content .hljs-built_in,
.markdown-content .hljs-builtin-name {
  @apply text-indigo-600 dark:text-indigo-400;
}

.markdown-content .hljs-meta {
  @apply text-gray-600 dark:text-gray-400;
}

.markdown-content .hljs-deletion {
  @apply bg-red-100 dark:bg-red-900 bg-opacity-50 dark:bg-opacity-30;
}

.markdown-content .hljs-addition {
  @apply bg-green-100 dark:bg-green-900 bg-opacity-50 dark:bg-opacity-30;
}

.markdown-content .hljs-strong {
  @apply font-bold;
}

/*
* Glossary Styles
*/
.glossary-content h2 {
  @apply text-2xl sm:text-3xl font-bold mt-12 mb-6 text-btc border-b-2 border-btc pb-3;
}

.glossary-content h2:first-of-type {
  @apply mt-4;
}

.glossary-content h3 {
  @apply text-base sm:text-lg font-semibold mt-4 mb-2 text-gray-700 dark:text-gray-300;
  scroll-margin-top: 40px;
}

/* Glossary Accordion Styles */
.glossary-accordion h2:first-of-type {
  @apply mt-4;
}

.glossary-entry {
  scroll-margin-top: 20px;
}

/* Glossary accordion summary - layout and colors */
.glossary-summary {
  @apply cursor-pointer list-none flex items-center gap-2 py-2 px-4 rounded-lg bg-gray-100 dark:bg-gray-800/50 hover:bg-gray-200 dark:hover:bg-gray-800 transition-colors;
}

/* Hide default marker/arrow on summary */
.glossary-summary::-webkit-details-marker {
  display: none;
}

/* Smooth animation for definition reveal */
.glossary-definition {
  animation: glossary-fade-in 0.2s ease-out;
}

@keyframes glossary-fade-in {
  from {
    opacity: 0;
    transform: translateY(-4px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Highlight the active/targeted entry */
.glossary-entry:target > .glossary-summary,
.glossary-entry[open] > .glossary-summary {
  @apply bg-btc/10 dark:bg-btc/20;
}

/* Glossary definition prose styling */
.glossary-definition a[href^="/docs/glossary"] {
  @apply text-gray-900 dark:text-gray-200 hover:text-btc transition-colors;
  text-decoration: underline;
  text-decoration-style: dotted;
  text-underline-offset: 2px;
}

.glossary-definition a[href^="/docs/glossary"]:hover {
  text-decoration-style: solid;
  text-underline-offset: 3px;
}

/*
* Terminal Styles
*/
.terminal-output {
  @apply font-mono text-sm;
}

.terminal-output pre {
  @apply whitespace-pre-wrap break-all m-0 p-0 bg-transparent border-none;
}

/* Terminal JSON syntax highlighting */
.terminal-output .json-key {
  @apply text-purple-400;
}

.terminal-output .json-string {
  @apply text-yellow-400;
}

.terminal-output .json-number {
  @apply text-emerald-400;
}

.terminal-output .json-boolean {
  @apply text-cyan-400;
}

.terminal-output .json-null {
  @apply text-gray-500;
}

/*
* Author Page Styles
*/
.author-address-box {
  @apply flex flex-col sm:flex-row items-start sm:items-center gap-3 px-4 py-2 bg-gray-200 dark:bg-gray-900 rounded border border-gray-300 dark:border-gray-700;
}

.author-address-code {
  @apply text-sm font-mono text-gray-700 dark:text-gray-300 flex-1 break-all;
}
